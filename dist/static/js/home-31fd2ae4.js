import{M as e}from"./_vue3-markdown-it@1.0.10@vue3-markdown-it-dc8453e6.js";import{u as s}from"./index-9306fae3.js";import{d as t,r as a,G as i,T as l,w as o,k as r}from"./_@vue_runtime-core@3.3.4@@vue-e5c0790c.js";import{r as n}from"./_@vue_reactivity@3.3.4@@vue-76911006.js";import{b as m}from"./_process@0.11.10@process-fb5a350b.js";import"./_dayjs@1.11.9@dayjs-55f4f668.js";import"./_vue@3.3.4@vue-51a0410b.js";import"./_@vue_runtime-dom@3.3.4@@vue-00ea6e8c.js";import"./_@vue_shared@3.3.4@@vue-2a69f7ce.js";import"./_element-plus@2.3.7@element-plus-95e0d55a.js";import"./_lodash-es@4.17.21@lodash-es-59f3f2a8.js";import"./_@vueuse_core@9.13.0@@vueuse-862f02bc.js";import"./_@vueuse_shared@9.13.0@@vueuse-47365d34.js";import"./_@element-plus_icons-vue@2.1.0@@element-plus-b2356b1d.js";import"./_@sxzz_popperjs-es@2.11.7@@sxzz-2b80355c.js";import"./_@ctrl_tinycolor@3.6.0@@ctrl-c1a62cf0.js";import"./_async-validator@4.2.5@async-validator-e4f19c0e.js";import"./_memoize-one@6.0.0@memoize-one-fb84edfa.js";import"./_escape-html@1.0.3@escape-html-ecaa18d0.js";import"./_normalize-wheel-es@1.2.0@normalize-wheel-es-a310e3de.js";import"./_@floating-ui_dom@1.4.3@@floating-ui-cdf89205.js";import"./_@floating-ui_core@1.3.1@@floating-ui-20bbec52.js";import"./_vue-router@4.2.2@vue-router-224ec3b6.js";import"./_vue-i18n@9.2.2@vue-i18n-b83e05b9.js";import"./_@intlify_shared@9.2.2@@intlify-6e310e65.js";import"./_@intlify_core-base@9.2.2@@intlify-09a8104f.js";import"./_@intlify_message-compiler@9.2.2@@intlify-15edb923.js";import"./_@intlify_devtools-if@9.2.2@@intlify-e011c282.js";import"./_@element-plus_icons-vue@1.1.4@@element-plus-550e6a21.js";import"./_el-table-next@1.0.2@el-table-next-8aea471e.js";import"./_vant@3.6.11@vant-d468f302.js";import"./_@vant_use@1.5.2@@vant-8f787209.js";import"./_@vant_popperjs@1.3.0@@vant-2804c717.js";import"./_pinia@2.1.4@pinia-5c3de677.js";import"./_vue-demi@0.14.5@vue-demi-46a7f895.js";import"./_axios@1.4.0@axios-f54b0603.js";import"./_mitt@3.0.1@mitt-a2488f8e.js";/* empty css                                          */const c=t({props:{},setup(e,t){const o=s(),r=n(!1),m=()=>{r.value=!r.value};return t.expose({tabStatus:m}),()=>a(i("van-popup"),{show:r.value,"onUpdate:show":e=>r.value=e,position:"right",style:{width:"70%",height:"100%"}},{default:()=>[a("div",{class:"main-popup"},[a("div",{class:"data-header"},[a("span",{class:"add-button",onClick:()=>{o.CreateMessage(),m()}},[l(" + 创建新对话")])]),a("div",{class:"data-view"},[a("ul",null,[o.navList.length?o.navList.map(((e,s)=>a("li",{key:s,class:1*e.id==1*o.tabId&&"active",onClick:()=>{(e=>{o.tabId!=e&&(o.ActiveChat(e),m())})(e.id)}},[e.abstract||"New Chat",l(" "),1*e.id==1*o.tabId&&a("img",{onClick:()=>{var s;s=e.id,o.DeleteItem(s)},src:"/static/svg/del-c011473b.svg",alt:""},null)]))):null]),a("span",{class:"more",onClick:()=>{o.GetChats()}},[l("加载更多...")])]),a("div",{class:"data-bottom"},[a("p",{class:"tips"},[l("登录后可自动同步设备聊天记录")])])])]})}}),p=t({props:{},setup(t){const p=s(),u=n(""),d=n(null),v=()=>{let e=document.querySelectorAll("#main ul>li"),s=e[e.length-1];s&&(document.querySelector("#main").scrollTop=s.offsetTop+s.offsetHeight)};return o((()=>p.message),(e=>{m.exports.nextTick((()=>{p.message&&p.message.messages.length&&v()}))}),{deep:!0,immediate:!0}),r((()=>{})),()=>a("div",{class:"wrapper"},[a(c,{ref:d},null),a("div",{class:"box"},[a("header",null,[a(i("van-nav-bar"),{"left-text":"返回","left-arrow":!0},{left:a("img",{onClick:()=>{},src:"/static/svg/set-4cba6ed7.svg",alt:""},null),title:a("p",null,[p.title]),right:a("img",{onClick:()=>{d.value.tabStatus()},src:"/static/svg/chatgpt_Ask_one-d82c3f20.svg",alt:""},null)})]),a("main",{id:"main"},[a("ul",null,[p.message&&p.message.messages.map(((s,t)=>"user"===s.role?a("li",{key:t,class:s.role},[a("div",{class:"wrap"},[a("div",{class:"info"},[a("span",null,[l(" 用户 ")]),a("div",{class:"pix"},[a("img",{src:"/static/svg/user-d673dfc5.svg",alt:""},null)])]),a("div",{class:"mark"},[a(e,{source:s.content},null)])])]):a("li",{key:t,class:s.role},[a("div",{class:"wrap"},[a("div",{class:"info"},[a("div",{class:"pix"},[a("img",{src:"/static/svg/ie-ChatGPT-8a3a8eb9.svg",alt:""},null)]),a("span",null,[l("小助手")])]),a("div",{class:"mark"},[t+1===p.message.messages.length&&p.loading?a("span",{class:"think"},[l("努力思考中... "),a("img",{src:"/static/svg/loading-b3ddb28b.svg",alt:""},null)]):a(e,{source:s.content},null)])])])))])]),a("footer",null,[a(i("van-search"),{modelValue:u.value,"onUpdate:modelValue":e=>u.value=e,showAction:!0,placeholder:"您的问题...",onSearch:"onSearch"},{action:a("div",{onClick:()=>{p.SenMsg(u.value),u.value="",setTimeout((()=>{v()}),100)}},[a(i("van-button"),{disabled:p.loading,type:"primary",size:"small"},{default:()=>[p.loading?"思考中":"发送"]})])})])])])}});export{p as default};
