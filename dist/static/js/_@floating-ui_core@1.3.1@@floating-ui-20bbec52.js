function t(t){return t.split("-")[1]}function e(t){return"y"===t?"height":"width"}function n(t){return t.split("-")[0]}function a(t){return["top","bottom"].includes(n(t))?"x":"y"}function i(i,r,o){let{reference:s,floating:l}=i;const c=s.x+s.width/2-l.width/2,f=s.y+s.height/2-l.height/2,u=a(r),m=e(u),y=s[m]/2-l[m]/2,x="x"===u;let g;switch(n(r)){case"top":g={x:c,y:s.y-l.height};break;case"bottom":g={x:c,y:s.y+s.height};break;case"right":g={x:s.x+s.width,y:f};break;case"left":g={x:s.x-l.width,y:f};break;default:g={x:s.x,y:s.y}}switch(t(r)){case"start":g[u]-=y*(o&&x?-1:1);break;case"end":g[u]+=y*(o&&x?-1:1)}return g}const r=async(t,e,n)=>{const{placement:a="bottom",strategy:r="absolute",middleware:o=[],platform:s}=n,l=o.filter(Boolean),c=await(null==s.isRTL?void 0:s.isRTL(e));let f=await s.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:m}=i(f,a,c),y=a,x={},g=0;for(let h=0;h<l.length;h++){const{name:n,fn:o}=l[h],{x:p,y:d,data:w,reset:b}=await o({x:u,y:m,initialPlacement:a,placement:y,strategy:r,middlewareData:x,rects:f,platform:s,elements:{reference:t,floating:e}});u=null!=p?p:u,m=null!=d?d:m,x={...x,[n]:{...x[n],...w}},b&&g<=50&&(g++,"object"==typeof b&&(b.placement&&(y=b.placement),b.rects&&(f=!0===b.rects?await s.getElementRects({reference:t,floating:e,strategy:r}):b.rects),({x:u,y:m}=i(f,y,c))),h=-1)}return{x:u,y:m,placement:y,strategy:r,middlewareData:x}};function o(t,e){return"function"==typeof t?t(e):t}function s(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}const l=Math.min,c=Math.max;const f=n=>({name:"arrow",options:n,async fn(i){const{x:r,y:s,placement:f,rects:u,platform:m,elements:y}=i,{element:x,padding:g=0}=o(n,i)||{};if(null==x)return{};const h=function(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}(g),p={x:r,y:s},d=a(f),w=e(d),b=await m.getDimensions(x),A="y"===d,R=A?"top":"left",k=A?"bottom":"right",v=A?"clientHeight":"clientWidth",E=u.reference[w]+u.reference[d]-p[d]-u.floating[w],L=p[d]-u.reference[d],T=await(null==m.getOffsetParent?void 0:m.getOffsetParent(x));let D=T?T[v]:0;D&&await(null==m.isElement?void 0:m.isElement(T))||(D=y.floating[v]||u.floating[w]);const O=E/2-L/2,P=D/2-b[w]/2-1,M=l(h[R],P),j=l(h[k],P),B=M,H=D-b[w]-j,W=D/2-b[w]/2+O,q=function(t,e,n){return c(t,l(e,n))}(B,W,H),z=null!=t(f)&&W!=q&&u.reference[w]/2-(W<B?M:j)-b[w]/2<0?W<B?B-W:H-W:0;return{[d]:p[d]-z,data:{[d]:q,centerOffset:W-q+z}}}});const u=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(i){const{x:r,y:s}=i,l=await async function(e,i){const{placement:r,platform:s,elements:l}=e,c=await(null==s.isRTL?void 0:s.isRTL(l.floating)),f=n(r),u=t(r),m="x"===a(r),y=["left","top"].includes(f)?-1:1,x=c&&m?-1:1,g=o(i,e);let{mainAxis:h,crossAxis:p,alignmentAxis:d}="number"==typeof g?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...g};return u&&"number"==typeof d&&(p="end"===u?-1*d:d),m?{x:p*x,y:h*y}:{x:h*y,y:p*x}}(i,e);return{x:r+l.x,y:s+l.y,data:l}}}};export{f as a,r as c,u as o,s as r};
