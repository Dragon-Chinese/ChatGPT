import{f as e}from"./_@vue_runtime-dom@3.3.4@@vue-00ea6e8c.js";import{z as t,e as s,E as i,i as a}from"./_element-plus@2.3.7@element-plus-95e0d55a.js";import{d as o,r as n,k as r}from"./_@vue_runtime-core@3.3.4@@vue-e5c0790c.js";import{R as l,c as m,a as c}from"./_vue-router@4.2.2@vue-router-224ec3b6.js";import{c as d}from"./_vue-i18n@9.2.2@vue-i18n-b83e05b9.js";import{E as p}from"./_@element-plus_icons-vue@1.1.4@@element-plus-550e6a21.js";import{n as u}from"./_el-table-next@1.0.2@el-table-next-8aea471e.js";import{s as h}from"./_vant@3.6.11@vant-d468f302.js";import{d as f,c as g}from"./_pinia@2.1.4@pinia-5c3de677.js";import{a as _}from"./_axios@1.4.0@axios-f54b0603.js";import{m as v}from"./_mitt@3.0.1@mitt-a2488f8e.js";/* empty css                                          */import"./_@vue_shared@3.3.4@@vue-2a69f7ce.js";import"./_@vue_reactivity@3.3.4@@vue-76911006.js";import"./_lodash-es@4.17.21@lodash-es-59f3f2a8.js";import"./_@vueuse_core@9.13.0@@vueuse-862f02bc.js";import"./_@vueuse_shared@9.13.0@@vueuse-47365d34.js";import"./_@element-plus_icons-vue@2.1.0@@element-plus-b2356b1d.js";import"./_@sxzz_popperjs-es@2.11.7@@sxzz-2b80355c.js";import"./_@ctrl_tinycolor@3.6.0@@ctrl-c1a62cf0.js";import"./_dayjs@1.11.9@dayjs-55f4f668.js";import"./_async-validator@4.2.5@async-validator-e4f19c0e.js";import"./_memoize-one@6.0.0@memoize-one-fb84edfa.js";import"./_escape-html@1.0.3@escape-html-ecaa18d0.js";import"./_normalize-wheel-es@1.2.0@normalize-wheel-es-a310e3de.js";import"./_@floating-ui_dom@1.4.3@@floating-ui-cdf89205.js";import"./_@floating-ui_core@1.3.1@@floating-ui-20bbec52.js";import"./_@intlify_shared@9.2.2@@intlify-6e310e65.js";import"./_@intlify_core-base@9.2.2@@intlify-09a8104f.js";import"./_@intlify_message-compiler@9.2.2@@intlify-15edb923.js";import"./_@intlify_devtools-if@9.2.2@@intlify-e011c282.js";import"./_@vant_use@1.5.2@@vant-8f787209.js";import"./_@vant_popperjs@1.3.0@@vant-2804c717.js";import"./_vue-demi@0.14.5@vue-demi-46a7f895.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const j=o({props:{},setup:e=>()=>n("div",{class:"main"},[n(l,null,null)])}),b=o({setup:()=>(r((()=>{})),()=>n(j,null,null))}),y={},x=[{path:"/",redirect:"/home"},{path:"/home",name:"home",component:()=>function(e,t,s){if(!t||0===t.length)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if((e=function(e){return"/"+e}(e))in y)return;y[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(s)for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.href===e&&(!t||"stylesheet"===a.rel))return}else if(document.querySelector(`link[href="${e}"]${a}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((t,s)=>{o.addEventListener("load",t),o.addEventListener("error",(()=>s(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e()))}((()=>import("./home-31fd2ae4.js")),["static/js/home-31fd2ae4.js","static/js/_vue3-markdown-it@1.0.10@vue3-markdown-it-dc8453e6.js","static/js/_dayjs@1.11.9@dayjs-55f4f668.js","static/js/_vue@3.3.4@vue-51a0410b.js","static/js/_@vue_runtime-dom@3.3.4@@vue-00ea6e8c.js","static/js/_@vue_runtime-core@3.3.4@@vue-e5c0790c.js","static/js/_@vue_reactivity@3.3.4@@vue-76911006.js","static/js/_@vue_shared@3.3.4@@vue-2a69f7ce.js","static/js/_process@0.11.10@process-fb5a350b.js","static/js/_element-plus@2.3.7@element-plus-95e0d55a.js","static/js/_lodash-es@4.17.21@lodash-es-59f3f2a8.js","static/js/_@vueuse_core@9.13.0@@vueuse-862f02bc.js","static/js/_@vueuse_shared@9.13.0@@vueuse-47365d34.js","static/js/_@element-plus_icons-vue@2.1.0@@element-plus-b2356b1d.js","static/js/_@sxzz_popperjs-es@2.11.7@@sxzz-2b80355c.js","static/js/_@ctrl_tinycolor@3.6.0@@ctrl-c1a62cf0.js","static/js/_async-validator@4.2.5@async-validator-e4f19c0e.js","static/js/_memoize-one@6.0.0@memoize-one-fb84edfa.js","static/js/_escape-html@1.0.3@escape-html-ecaa18d0.js","static/js/_normalize-wheel-es@1.2.0@normalize-wheel-es-a310e3de.js","static/js/_@floating-ui_dom@1.4.3@@floating-ui-cdf89205.js","static/js/_@floating-ui_core@1.3.1@@floating-ui-20bbec52.js","static/css/_element-plus@2.3-6b54aa85.css","static/js/_vue-router@4.2.2@vue-router-224ec3b6.js","static/js/_vue-i18n@9.2.2@vue-i18n-b83e05b9.js","static/js/_@intlify_shared@9.2.2@@intlify-6e310e65.js","static/js/_@intlify_core-base@9.2.2@@intlify-09a8104f.js","static/js/_@intlify_message-compiler@9.2.2@@intlify-15edb923.js","static/js/_@intlify_devtools-if@9.2.2@@intlify-e011c282.js","static/js/_@element-plus_icons-vue@1.1.4@@element-plus-550e6a21.js","static/js/_el-table-next@1.0.2@el-table-next-8aea471e.js","static/js/_vant@3.6.11@vant-d468f302.js","static/js/_@vant_use@1.5.2@@vant-8f787209.js","static/js/_@vant_popperjs@1.3.0@@vant-2804c717.js","static/css/_vant@3.6-80052542.css","static/js/_pinia@2.1.4@pinia-5c3de677.js","static/js/_vue-demi@0.14.5@vue-demi-46a7f895.js","static/js/_axios@1.4.0@axios-f54b0603.js","static/js/_mitt@3.0.1@mitt-a2488f8e.js","static/css/home-1e0f48c1.css","static/css/_highlight.js@11.8.0@highlight-f02ba415.css"]),meta:{title:"首页",key:"/cms/home"}}],C=m({history:c(),routes:x});let L={},w="zh-CN";-1!==navigator.language.toLowerCase().indexOf("zh")?(w="zh-cn",L=t):(w="en",L=s),localStorage.setItem("lang",w);const z=d({locale:w,silentTranslationWarn:!0,legacy:!1,fallbackLocale:"en",messages:{en:{hello:e=>{const{normalize:t}=e;return t(["hello world"])}},"zh-cn":{hello:e=>{const{normalize:t}=e;return t(["你好"])}}}}),O=_.create({baseURL:"/api/v1",withCredentials:!0,timeout:111115e3});O.interceptors.request.use((e=>("/file/uploadFile"==e.url&&(e.headers["Content-Type"]="multipart/form-data"),e.headers["Content-Type"]="application/json",e)),(e=>Promise.reject(e))),O.interceptors.response.use((e=>(e.data,e.data)),(e=>(403!==e.response.status&&e.response.data.msg&&i.error(e.response?e.response.data.msg||e.response.statusText:"服务器断开连接，cancel"),"REDIRECT"===e.response.headers.redirect&&(window.location.href=e.response.headers.contentpath),Promise.reject(e))));const P=f("data",{state:()=>({title:"AI 小助手",tabId:null,session:[],message:null,navList:[],loading:!1,updateTime:""}),actions:{ActiveChat(e){this.tabId=e,this.GetChat()},GetChat(){var e;(e={id:this.tabId},O({url:"https://120.27.245.86/api/v1/ai/chat",method:"get",params:e})).then((e=>{this.message=e.chat}))},GetChats(){var e;(e={until:this.updateTime||+new Date},O({url:"https://120.27.245.86/api/v1/ai/chats",method:"get",params:e})).then((e=>{if(e.chats&&(this.navList=[...this.navList,...e.chats]),!e.chats)return this.CreateMessage();this.updateTime=this.navList[this.navList.length-1].update_time,this.tabId||(this.tabId=this.navList[0].id,this.updateTime=this.navList[this.navList.length-1].update_time,this.GetChat())}))},SenMsg(e){var t;e&&(this.message.messages.push({role:"user",content:e}),this.message.messages.push({role:"assistant",content:""}),this.loading=!0,(t={message:e,id:this.tabId},O({url:"https://120.27.245.86/api/v1/ai/chat",method:"post",data:t})).then((e=>{this.message.messages[this.message.messages.length-1].content=e.message.content,this.loading=!1,this.tabId||(this.tabId=e.id,this.GetChats())})))},CreateMessage(){this.tabId=null,this.message={messages:[]},this.message.messages.push({role:"assistant",content:"您好，我是AI，有什么可以帮助您的"})},DeleteItem(e){var t;(t={id:e},O({url:"https://120.27.245.86/api/v1/ai/chat",method:"delete",params:t})).then((e=>{this.navList=[],this.updateTime="",this.tabId=null,this.GetChats()}))}}});C.beforeEach((async(e,t,s)=>{const i=P();/micromessenger/.test(navigator.userAgent.toLowerCase())&&(location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx49f38ab81d27df08&redirect_uri=http://192.168.1.187:3000/&response_type=code&scope=SCOPE&state=STATE"),i.GetChats(),s()}));const E=Object.freeze(Object.defineProperty({__proto__:null,switchNav:function(){let e=!1;var t,s={trident:(t=navigator.userAgent).indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Firefox")>-1,mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1,iPad:t.indexOf("iPad")>-1,webApp:t.indexOf("Safari")>-1};return(s.mobile||s.ios||s.android||s.iPhone||s.iPad)&&(e=!0),e}},Symbol.toStringTag,{value:"Module"}));function I(){const e=document.documentElement.clientWidth/375;document.documentElement.style.fontSize=37.5*Math.min(e,2)+"px"}I(),window.onresize=function(){I()};const T=e(b);T.config.globalProperties.$mitt=v();for(const[S,A]of Object.entries(p))T.component(S,A);T.config.globalProperties.$func=E,T.use(a,{locale:L}),T.use(g()),T.use(h),T.use(u),T.use(z),T.use(C),T.mount("#app");export{P as u};
